(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15c7fe16"],{"02f4":function(e,t,n){var s=n("4588"),i=n("be13");e.exports=function(e){return function(t,n){var r,o,a=String(i(t)),u=s(n),c=a.length;return u<0||u>=c?e?"":void 0:(r=a.charCodeAt(u),r<55296||r>56319||u+1===c||(o=a.charCodeAt(u+1))<56320||o>57343?e?a.charAt(u):r:e?a.slice(u,u+2):o-56320+(r-55296<<10)+65536)}}},"0390":function(e,t,n){"use strict";var s=n("02f4")(!0);e.exports=function(e,t,n){return t+(n?s(e,t).length:1)}},"0a0d":function(e,t,n){e.exports=n("e829")},"214f":function(e,t,n){"use strict";n("b0c5");var s=n("2aba"),i=n("32e9"),r=n("79e5"),o=n("be13"),a=n("2b4c"),u=n("520a"),c=a("species"),l=!r(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),f=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var p=a(e),d=!r(function(){var t={};return t[p]=function(){return 7},7!=""[e](t)}),g=d?!r(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[p](""),!t}):void 0;if(!d||!g||"replace"===e&&!l||"split"===e&&!f){var h=/./[p],m=n(o,p,""[e],function(e,t,n,s,i){return t.exec===u?d&&!i?{done:!0,value:h.call(t,n,s)}:{done:!0,value:e.call(n,t,s)}:{done:!1}}),v=m[0],b=m[1];s(String.prototype,e,v),i(RegExp.prototype,p,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},"268f":function(e,t,n){e.exports=n("fde4")},"2f21":function(e,t,n){"use strict";var s=n("79e5");e.exports=function(e,t){return!!e&&s(function(){t?e.call(null,function(){},1):e.call(null)})}},"2f37":function(e,t,n){var s=n("63b6");s(s.S,"Date",{now:function(){return(new Date).getTime()}})},"454f":function(e,t,n){n("46a7");var s=n("584a").Object;e.exports=function(e,t,n){return s.defineProperty(e,t,n)}},"46a7":function(e,t,n){var s=n("63b6");s(s.S+s.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"520a":function(e,t,n){"use strict";var s=n("0bfb"),i=RegExp.prototype.exec,r=String.prototype.replace,o=i,a="lastIndex",u=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e[a]||0!==t[a]}(),c=void 0!==/()??/.exec("")[1],l=u||c;l&&(o=function(e){var t,n,o,l,f=this;return c&&(n=new RegExp("^"+f.source+"$(?!\\s)",s.call(f))),u&&(t=f[a]),o=i.call(f,e),u&&o&&(f[a]=f.global?o.index+o[0].length:t),c&&o&&o.length>1&&r.call(o[0],n,function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(o[l]=void 0)}),o}),e.exports=o},"540d":function(e,t,n){},"55dd":function(e,t,n){"use strict";var s=n("5ca1"),i=n("d8e8"),r=n("4bf8"),o=n("79e5"),a=[].sort,u=[1,2,3];s(s.P+s.F*(o(function(){u.sort(void 0)})||!o(function(){u.sort(null)})||!n("2f21")(a)),"Array",{sort:function(e){return void 0===e?a.call(r(this)):a.call(r(this),i(e))}})},"5f1b":function(e,t,n){"use strict";var s=n("23c6"),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var r=n.call(e,t);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==s(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"69dc":function(e,t,n){"use strict";var s=n("540d"),i=n.n(s);i.a},"85f2":function(e,t,n){e.exports=n("454f")},a481:function(e,t,n){"use strict";var s=n("cb7c"),i=n("4bf8"),r=n("9def"),o=n("4588"),a=n("0390"),u=n("5f1b"),c=Math.max,l=Math.min,f=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g,g=function(e){return void 0===e?e:String(e)};n("214f")("replace",2,function(e,t,n,h){return[function(s,i){var r=e(this),o=void 0==s?void 0:s[t];return void 0!==o?o.call(s,r,i):n.call(String(r),s,i)},function(e,t){var i=h(n,e,this,t);if(i.done)return i.value;var f=s(e),p=String(this),d="function"===typeof t;d||(t=String(t));var v=f.global;if(v){var b=f.unicode;f.lastIndex=0}var w=[];while(1){var x=u(f,p);if(null===x)break;if(w.push(x),!v)break;var y=String(x[0]);""===y&&(f.lastIndex=a(p,r(f.lastIndex),b))}for(var Q="",S=0,k=0;k<w.length;k++){x=w[k];for(var $=String(x[0]),j=c(l(o(x.index),p.length),0),C=[],q=1;q<x.length;q++)C.push(g(x[q]));var E=x.groups;if(d){var I=[$].concat(C,j,p);void 0!==E&&I.push(E);var T=String(t.apply(void 0,I))}else T=m($,p,j,C,E,t);j>=S&&(Q+=p.slice(S,j)+T,S=j+$.length)}return Q+p.slice(S)}];function m(e,t,s,r,o,a){var u=s+e.length,c=r.length,l=d;return void 0!==o&&(o=i(o),l=p),n.call(a,l,function(n,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,s);case"'":return t.slice(u);case"<":a=o[i.slice(1,-1)];break;default:var l=+i;if(0===l)return i;if(l>c){var p=f(l/10);return 0===p?i:p<=c?void 0===r[p-1]?i.charAt(1):r[p-1]+i.charAt(1):i}a=r[l-1]}return void 0===a?"":a})}})},b0c5:function(e,t,n){"use strict";var s=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:s!==/./.exec},{exec:s})},bb37:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-container"},[n("el-button",{attrs:{type:"primary"},on:{click:e.openFile}},[e._v("上传试题")]),n("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file",accept:"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},on:{change:e.upload}}),n("div",{staticClass:"mt20"},[n("div",{staticClass:"flex-row flex-center"},[n("span",{staticClass:"text-nowrap mr10 font20"},[e._v("试题名称 :")]),n("el-input",{attrs:{clearable:"",placeholder:"请输入试题名称"},model:{value:e.questionTitle.name,callback:function(t){e.$set(e.questionTitle,"name","string"===typeof t?t.trim():t)},expression:"questionTitle.name"}})],1),n("div",{staticStyle:{margin:"10px 0 0 100px"}},[n("span",{staticStyle:{color:"red"}},[e._v(e._s(e.questionTitle.message))])])]),n("Single",{attrs:{singleQuestion:e.singleQuestion},on:{addSingle:e.addSingle,deleteItem:e.deleteItem}}),n("Multiple",{attrs:{multipleQuestion:e.multipleQuestion},on:{addMultiple:e.addMultiple,deleteItem:e.deleteItem}}),n("Judgement",{attrs:{judgementQuestion:e.judgementQuestion},on:{addJudgement:e.addJudgement,deleteItem:e.deleteItem}}),n("Answer",{attrs:{answerQuestion:e.answerQuestion},on:{addAnswer:e.addAnswer,deleteItem:e.deleteItem}}),n("div",{staticClass:"mt20"},[n("el-button",{attrs:{type:"primary"},on:{click:e.create}},[e._v("创建")]),n("el-button",{attrs:{type:"success"},on:{click:e.goBack}},[e._v("返回")])],1)],1)},i=[],r=n("cebc"),o=(n("a481"),n("7f7f"),n("55dd"),n("ac6a"),n("96cf"),n("3b8d")),a=n("0a0d"),u=n.n(a),c=(n("6b54"),n("2f62")),l=n("adb5"),f={data:function(){return{questionTitle:{name:"",message:""},singleQuestion:[],multipleQuestion:[],judgementQuestion:[],answerQuestion:[],isSave:!1}},methods:{addSingle:function(){var e=u()().toString();this.singleQuestion.push({id:e,title:"",options:{A:"",B:"",C:"",D:""},answer:"",message:""})},addMultiple:function(){var e=u()().toString();this.multipleQuestion.push({id:e,title:"",options:{A:"",B:"",C:"",D:""},answer:[],message:""})},addJudgement:function(){var e=u()().toString();this.judgementQuestion.push({id:e,title:"",answer:"",message:""})},addAnswer:function(){var e=u()().toString();this.answerQuestion.push({id:e,title:"",answer:"",message:""})},create:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n,s,i,r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!=this.singleQuestion.length||0!=this.multipleQuestion.length||0!=this.judgementQuestion.length||0!=this.answerQuestion){e.next=3;break}return this.$message({showClose:!0,message:"试卷至少要有一道试题",type:"warning"}),e.abrupt("return");case 3:if(t=!0,n={},s={},i={},r={},this.singleQuestion.forEach(function(e){var s=null;e.title?e.options["A"]&&e.options["B"]&&e.options["C"]&&e.options["D"]?e.answer||(s="请选择一个正确答案"):s="选项不能为空":s="题目不能为空",s?t=!1:n[e.id]=e.answer,e.message=s}),this.multipleQuestion.forEach(function(e){var n=null;e.title?e.options["A"]&&e.options["B"]&&e.options["C"]&&e.options["D"]?e.answer.length<=1&&(n="请选择两个或两个以上正确答案"):n="选项不能为空":n="题目不能为空",n?t=!1:s[e.id]=e.answer.sort().toString(),e.message=n}),this.judgementQuestion.forEach(function(e){var n=null;e.title?e.answer||(n="请选择一个正确答案"):n="题目不能为空",n?t=!1:i[e.id]=e.answer,e.message=n}),this.answerQuestion.forEach(function(e){var n=null;e.title?e.answer||(n="请填写正确答案"):n="题目不能为空",n?t=!1:r[e.id]=e.answer,e.message=n}),this.questionTitle.name?this.questionTitle.message="":(this.questionTitle.message="试题名称不能为空",t=!1),!t){e.next=34;break}return o={},o.title=this.questionTitle.name,o.single={question:this.singleQuestion,answer:n,count:this.singleQuestion.length},o.multiple={question:this.multipleQuestion,answer:s,count:this.multipleQuestion.length},o.judgement={question:this.judgementQuestion,answer:i,count:this.judgementQuestion.length},o.answer={question:this.answerQuestion,answer:r,count:this.answerQuestion.length},o.userName=this.userInfo.name,o.userId=this.userInfo._id,e.prev=22,e.next=25,Object(l["b"])("/api/questions/addQuestion",o);case 25:a=e.sent,200==a.statusCode?(this.$message({type:"success",message:a.message,showClose:!0}),this.isSave=!0,this.$router.back()):this.$message({type:"warning",message:a.message,showClose:!0}),e.next=32;break;case 29:e.prev=29,e.t0=e["catch"](22),this.$message({type:"error",message:e.t0.toString(),showClose:!0});case 32:e.next=35;break;case 34:this.$message({type:"warning",message:"请完善试题信息",showClose:!0});case 35:case"end":return e.stop()}},e,this,[[22,29]])}));function t(){return e.apply(this,arguments)}return t}(),deleteItem:function(e){var t=e.key,n=e.index;this[t].splice(n,1)},goBack:function(){this.$router.push({name:"consultQuestions"})},back:function(e){this.questionTitle.name||0!=this.singleQuestion.length||0!=this.multipleQuestion.length||0!=this.judgementQuestion.length||0!=this.answerQuestion?this.openMessageBox(e):e&&"function"==typeof e&&e()},openMessageBox:function(e){this.$confirm("试卷还没保存, 是否放弃保存并退出","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e&&"function"==typeof e&&e()}).catch(function(){})},openFile:function(){document.getElementById("file").click()},upload:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,s,i,r,o,a,u,c,f,p=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.target.files[0],s=n.name,i=/(\.(xls)|(xlsx))$/i,r=s.replace(/(.*\/)*([^.]+).*/gi,"$2"),!i.test(s)){e.next=14;break}return o=new FormData,o.append("file",n),e.next=10,Object(l["b"])("/api/upload/uploadFile",o);case 10:if(a=e.sent,200==a.statusCode){for(f in u=a.data.question,this.questionTitle.name||(this.questionTitle.name=r),c=function(e){u[e].forEach(function(t){p["".concat(e,"Question")].push(t)})},u)c(f);a.message?this.$message({type:"error",message:a.message,showClose:!0}):this.$message({type:"success",message:"试题解析成功",showClose:!0})}else this.$message({type:"error",message:a.message,showClose:!0});e.next=15;break;case 14:this.$message({type:"warning",message:"文件格式不正确,请选择后缀为xls或者xlsx的文件",showClose:!0});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](0),this.$message({type:"error",message:e.t0.toString(),showClose:!0});case 20:case"end":return e.stop()}},e,this,[[0,17]])}));function t(t){return e.apply(this,arguments)}return t}()},computed:Object(r["a"])({},Object(c["b"])(["userInfo"])),beforeRouteLeave:function(e,t,n){this.isSave?n():this.back(function(){n()})}},p=f,d=(n("69dc"),n("2877")),g=Object(d["a"])(p,s,i,!1,null,"f04a589c",null);g.options.__file="AddQuestion.vue";t["default"]=g.exports},bf90:function(e,t,n){var s=n("36c3"),i=n("bf0b").f;n("ce7e")("getOwnPropertyDescriptor",function(){return function(e,t){return i(s(e),t)}})},cebc:function(e,t,n){"use strict";var s=n("268f"),i=n.n(s),r=n("e265"),o=n.n(r),a=n("a4bb"),u=n.n(a),c=n("85f2"),l=n.n(c);function f(e,t,n){return t in e?l()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=u()(n);"function"===typeof o.a&&(s=s.concat(o()(n).filter(function(e){return i()(n,e).enumerable}))),s.forEach(function(t){f(e,t,n[t])})}return e}n.d(t,"a",function(){return p})},e265:function(e,t,n){e.exports=n("ed33")},e829:function(e,t,n){n("2f37"),e.exports=n("584a").Date.now},ed33:function(e,t,n){n("014b"),e.exports=n("584a").Object.getOwnPropertySymbols},fde4:function(e,t,n){n("bf90");var s=n("584a").Object;e.exports=function(e,t){return s.getOwnPropertyDescriptor(e,t)}}}]);
//# sourceMappingURL=chunk-15c7fe16.75c1154a.js.map