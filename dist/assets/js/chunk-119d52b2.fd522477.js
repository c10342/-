(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-119d52b2"],{"0a0d":function(e,t,n){e.exports=n("e829")},"268f":function(e,t,n){e.exports=n("fde4")},"2f21":function(e,t,n){"use strict";var s=n("79e5");e.exports=function(e,t){return!!e&&s(function(){t?e.call(null,function(){},1):e.call(null)})}},"2f37":function(e,t,n){var s=n("63b6");s(s.S,"Date",{now:function(){return(new Date).getTime()}})},"389c":function(e,t,n){},"454f":function(e,t,n){n("46a7");var s=n("584a").Object;e.exports=function(e,t,n){return s.defineProperty(e,t,n)}},"46a7":function(e,t,n){var s=n("63b6");s(s.S+s.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"55dd":function(e,t,n){"use strict";var s=n("5ca1"),i=n("d8e8"),o=n("4bf8"),a=n("79e5"),u=[].sort,r=[1,2,3];s(s.P+s.F*(a(function(){r.sort(void 0)})||!a(function(){r.sort(null)})||!n("2f21")(u)),"Array",{sort:function(e){return void 0===e?u.call(o(this)):u.call(o(this),i(e))}})},"6ccd":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-container"},[n("div",[n("div",{staticClass:"flex-row flex-center"},[n("span",{staticClass:"text-nowrap mr10 font20"},[e._v("试题名称 :")]),n("el-input",{attrs:{clearable:"",placeholder:"请输入试题名称"},model:{value:e.questionTitle.name,callback:function(t){e.$set(e.questionTitle,"name","string"===typeof t?t.trim():t)},expression:"questionTitle.name"}})],1),n("div",{staticStyle:{margin:"10px 0 0 100px"}},[n("span",{staticStyle:{color:"red"}},[e._v(e._s(e.questionTitle.message))])])]),n("Single",{attrs:{singleQuestion:e.singleQuestion},on:{addSingle:e.addSingle,deleteItem:e.deleteItem}}),n("Multiple",{attrs:{multipleQuestion:e.multipleQuestion},on:{addMultiple:e.addMultiple,deleteItem:e.deleteItem}}),n("Judgement",{attrs:{judgementQuestion:e.judgementQuestion},on:{addJudgement:e.addJudgement,deleteItem:e.deleteItem}}),n("Answer",{attrs:{answerQuestion:e.answerQuestion},on:{addAnswer:e.addAnswer,deleteItem:e.deleteItem}}),n("div",{staticClass:"mt20"},[n("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),n("el-button",{attrs:{type:"success"},on:{click:e.goBack}},[e._v("返回")])],1)],1)},i=[],o=n("cebc"),a=(n("7f7f"),n("55dd"),n("ac6a"),n("0a0d")),u=n.n(a),r=(n("6b54"),n("96cf"),n("3b8d")),l=n("2f62"),c=n("adb5"),d={data:function(){return{questionTitle:{name:"",message:""},singleQuestion:[],multipleQuestion:[],judgementQuestion:[],answerQuestion:[],_id:"",isEdit:!1,isSave:!1}},created:function(){this.getQuestionDetail()},methods:{getQuestionDetail:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=this.$route.params.id,e.next=4,Object(c["a"])("/api/questions/getPublishedQuestionById/"+t);case 4:n=e.sent,200==n.statusCode?(this.questionTitle.name=n.data.questionDetail.title,this.singleQuestion=n.data.questionDetail.single,this.multipleQuestion=n.data.questionDetail.multiple,this.judgementQuestion=n.data.questionDetail.judgement,this.answerQuestion=n.data.questionDetail.answer):this.$message({showClose:!0,message:n.message,type:"warning"}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$message({showClose:!0,message:e.t0.toString(),type:"error"});case 11:return e.prev=11,this.$nextTick(function(){s.isEdit=!1}),e.finish(11);case 14:case"end":return e.stop()}},e,this,[[0,8,11,14]])}));function t(){return e.apply(this,arguments)}return t}(),addSingle:function(){var e=u()().toString();this.singleQuestion.push({id:e,title:"",options:{A:"",B:"",C:"",D:""},answer:"",message:""})},addMultiple:function(){var e=u()().toString();this.multipleQuestion.push({id:e,title:"",options:{A:"",B:"",C:"",D:""},answer:[],message:""})},addJudgement:function(){var e=u()().toString();this.judgementQuestion.push({id:e,title:"",answer:"",message:""})},addAnswer:function(){var e=u()().toString();this.answerQuestion.push({id:e,title:"",answer:"",message:""})},save:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,s,i,o,a,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!=this.singleQuestion.length||0!=this.multipleQuestion.length||0!=this.judgementQuestion.length||0!=this.answerQuestion){e.next=3;break}return this.$message({showClose:!0,message:"试卷至少要有一道试题",type:"warning"}),e.abrupt("return");case 3:if(t=!0,n={},s={},i={},o={},this.singleQuestion.forEach(function(e){var s=null;e.title?e.options["A"]&&e.options["B"]&&e.options["C"]&&e.options["D"]?e.answer||(s="请选择一个正确答案"):s="选项不能为空":s="题目不能为空",s?t=!1:n[e.id]=e.answer,e.message=s}),this.multipleQuestion.forEach(function(e){var n=null;e.title?e.options["A"]&&e.options["B"]&&e.options["C"]&&e.options["D"]?e.answer.length<=1&&(n="请选择两个或两个以上正确答案"):n="选项不能为空":n="题目不能为空",n?t=!1:s[e.id]=e.answer.sort().toString(),e.message=n}),this.judgementQuestion.forEach(function(e){var n=null;e.title?e.answer||(n="请选择一个正确答案"):n="题目不能为空",n?t=!1:i[e.id]=e.answer,e.message=n}),this.answerQuestion.forEach(function(e){var n=null;e.title?e.answer||(n="请填写正确答案"):n="题目不能为空",n?t=!1:o[e.id]=e.answer,e.message=n}),this.questionTitle.name?this.questionTitle.message="":(this.questionTitle.message="试题名称不能为空",t=!1),!t){e.next=35;break}return a={},a.title=this.questionTitle.name,a.single={question:this.singleQuestion.length},a.multiple={question:this.multipleQuestion,answer:s,count:this.multipleQuestion.length},a.judgement={question:this.judgementQuestion,answer:i,count:this.judgementQuestion.length},a.answer={question:this.answerQuestion,answer:o,count:this.answerQuestion.length},a.userName=this.userInfo.name,a.userId=this.userInfo._id,a._id=this.$route.params.id,e.prev=23,e.next=26,Object(c["b"])("/api/questions/editQuestion",a);case 26:u=e.sent,200==u.statusCode?(this.$message({type:"success",message:u.message,showClose:!0}),this.isSave=!0,this.$router.back()):this.$message({type:"warning",message:u.message,showClose:!0}),e.next=33;break;case 30:e.prev=30,e.t0=e["catch"](23),this.$message({type:"error",message:e.t0.toString(),showClose:!0});case 33:e.next=36;break;case 35:this.$message({type:"warning",message:"请完善试题信息",showClose:!0});case 36:case"end":return e.stop()}},e,this,[[23,30]])}));function t(){return e.apply(this,arguments)}return t}(),deleteItem:function(e){var t=e.key,n=e.index;this[t].splice(n,1)},goBack:function(){this.$router.push({name:"publishedQuestions"})},back:function(e){(this.questionTitle.name||0!=this.singleQuestion.length||0!=this.multipleQuestion.length||0!=this.judgementQuestion.length||0!=this.answerQuestion)&&this.isEdit?this.openMessageBox(e):e&&"function"==typeof e&&e()},openMessageBox:function(e){this.$confirm("试卷还没保存, 是否放弃保存并退出","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e&&"function"==typeof e&&e()}).catch(function(){})}},beforeRouteLeave:function(e,t,n){this.isSave?n():this.back(function(){n()})},watch:{questionTitle:{deep:!0,handler:function(){this.isEdit=!0}},singleQuestion:{deep:!0,handler:function(){this.isEdit=!0}},multipleQuestion:{deep:!0,handler:function(){this.isEdit=!0}},judgementQuestion:{deep:!0,handler:function(){this.isEdit=!0}},answerQuestion:{deep:!0,handler:function(){this.isEdit=!0}}},computed:Object(o["a"])({},Object(l["b"])(["userInfo"]))},f=d,h=(n("d8d3"),n("2877")),p=Object(h["a"])(f,s,i,!1,null,"73349b22",null);p.options.__file="EditQuestion.vue";t["default"]=p.exports},"85f2":function(e,t,n){e.exports=n("454f")},bf90:function(e,t,n){var s=n("36c3"),i=n("bf0b").f;n("ce7e")("getOwnPropertyDescriptor",function(){return function(e,t){return i(s(e),t)}})},cebc:function(e,t,n){"use strict";var s=n("268f"),i=n.n(s),o=n("e265"),a=n.n(o),u=n("a4bb"),r=n.n(u),l=n("85f2"),c=n.n(l);function d(e,t,n){return t in e?c()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=r()(n);"function"===typeof a.a&&(s=s.concat(a()(n).filter(function(e){return i()(n,e).enumerable}))),s.forEach(function(t){d(e,t,n[t])})}return e}n.d(t,"a",function(){return f})},d8d3:function(e,t,n){"use strict";var s=n("389c"),i=n.n(s);i.a},e265:function(e,t,n){e.exports=n("ed33")},e829:function(e,t,n){n("2f37"),e.exports=n("584a").Date.now},ed33:function(e,t,n){n("014b"),e.exports=n("584a").Object.getOwnPropertySymbols},fde4:function(e,t,n){n("bf90");var s=n("584a").Object;e.exports=function(e,t){return s.getOwnPropertyDescriptor(e,t)}}}]);
//# sourceMappingURL=chunk-119d52b2.fd522477.js.map